<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习前端路由-history实现方式</title>
</head>

<body>
    <button onclick="toPage('aaa')">跳转到A页面</button>
    <button onclick="toPage('bbb')">跳转到B页面</button>
    <button onclick="backPage">返回上一页</button>
    <div id="routerView">

    </div>
    <script>
        // 此测试需搭起一个服务进行，可用node中的live-server库快速搭起
        const routerView = document.getElementById('routerView')

        function toPage(url) {
            const routeState = { url, date: +new Date() }
            history.pushState(routeState, '', `${location.origin}/${url}`)
            handlePageChange(url)
        }

        function handlePageChange(url) {
            routerView.innerHTML = url
        }

        function onPopState(state) {
            handlePageChange(`触发页面前进/后退啦，url=` + location.pathname)
        }
        window.addEventListener('popstate', onPopState)
    </script>
</body>

</html>